% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/scale_bar.R
\name{make_scale_bar}
\alias{make_scale_bar}
\title{Create a ggplot2 scale bar grob}
\usage{
make_scale_bar(
  x_vals,
  y_vals,
  microns_per_pixel = 0.12028,
  scale_length_um = NULL,
  x_low_cutoff = 0,
  x_high_cutoff = 1,
  y_low_cutoff = 0,
  y_high_cutoff = 1,
  position = c("bottom-right", "bottom-left", "top-right", "top-left"),
  label_size = 15
)
}
\arguments{
\item{x_vals}{Numeric vector of x coordinates (in pixels) used to determine
the horizontal extent and cropping of the scale bar.}

\item{y_vals}{Numeric vector of y coordinates (in pixels) used to determine
the vertical extent and cropping of the scale bar.}

\item{microns_per_pixel}{Numeric scalar giving the conversion factor from
pixels to microns. Defaults to 0.12028.}

\item{scale_length_um}{Optional numeric scalar: desired scale bar length in
microns. If \code{NULL}, a "nice" value is chosen automatically based on the
x-range (approximately one quarter of the field of view).}

\item{x_low_cutoff, x_high_cutoff}{Numeric in [0, 1]; quantiles used to
clamp extreme values of \code{x_vals} before computing the range.}

\item{y_low_cutoff, y_high_cutoff}{Numeric in [0, 1]; quantiles used to
clamp extreme values of \code{y_vals} before computing the range.}

\item{position}{Character string giving the position of the scale bar
within the plot area. One of \code{"bottom-right"}, \code{"bottom-left"},
\code{"top-right"}, or \code{"top-left"}.}

\item{label_size}{Numeric scalar giving the font size (points) of the scale
bar label text.}
}
\value{
A named list of three \code{annotation_custom()} layers:
\itemize{
\item \code{bg}: white background rectangle behind the bar and label
\item \code{rect}: black rectangle representing the scale bar
\item \code{label}: text label showing the bar length (e.g. \code{"50 µm"} or \code{"1 mm"})
}
}
\description{
Constructs a white-background, black-rectangle scale bar with a text label
(in µm or mm) that can be added to a \code{ggplot2} object using
\code{annotation_custom()}. The bar length can be given explicitly in microns
or automatically chosen based on the x-range of the data.
}
\examples{
\dontrun{
library(ggplot2)

scale_bar <- make_scale_bar(
    x_vals = cell_meta$CenterX_global_px,
    y_vals = cell_meta$CenterY_global_px
)

ggplot() +
    scale_bar$bg +
    scale_bar$rect +
    scale_bar$label
}

}
